<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interactive Python Terminal</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/python.css') }}">
  <!-- Highlight.js CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
</head>
<body>
  <div class="nav-top">
    {% if user %}
      <span>ğŸ‘‹ Welcome, <strong id="username">{{ user }}</strong></span> |
      <a href="{{ url_for('main.home') }}">ğŸ  Home</a> |
      <a href="{{ url_for('main.r_terminal') }}">R</a> |
      <a href="{{ url_for('auth.logout') }}">ğŸšª Logout</a>
    {% endif %}
  </div>

  <div class="terminal">
  <!-- Title & File Loader -->
  <h1 class="page-title">Learn Python With AI</h1>

  <!-- Chat & Code Panels -->
  <div class="dual-column-container">
    <div class="left-panel">
      <div id="chatBox" class="chat-box"></div>
      <div class="chat-input-wrapper">
        <textarea id="prompt" placeholder="Ask me anything..."></textarea>
        <button id="voiceBtn" class="chat-icon" title="Speak">ğŸ™ï¸</button>
        <button onclick="askGroq()" class="chat-icon" title="Send">â¤</button>
      </div>
      <h5 style="text-align: center;"> AI can make mistakes. Check important info.</h5>
    </div>

    <div class="right-panel">
      <textarea id="codePy" placeholder="Write Python code here..."></textarea>
      <div class="code-buttons">
        <button id="runPy">â–¶ï¸ Run</button>
        <button id="resetPy">ğŸ”„ Reset</button>
        <button onclick="printTerminal()" class="print">ğŸ–¨ï¸ Print</button>
      </div>
      <pre><code class="output" id="outputPy"></code></pre>
    </div>
  </div>

  <div id="loadingMessage" style="color: #ccc; text-align: center; padding: 20px;">
    â³ Loading Pyodide and essential packages...
  </div>

  <!-- Re-run initial highlight on static code blocks -->
  <script>hljs.highlightAll();</script>

  <!-- Terminal & Assistant Script -->
  <script type="module" src="{{ url_for('static', filename='js/python_terminal.js') }}"></script>
  <script type="module" src="{{ url_for('static', filename='js/utils.js') }}"></script>
</body>
</html>

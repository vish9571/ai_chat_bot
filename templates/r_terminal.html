<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interactive R Terminal</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/r.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
</head>
<body>
  <div class="nav-top">
    {% if user %}
      <span>ğŸ‘‹ Welcome, <strong id="username">{{ user }}</strong></span> |
      <a href="{{ url_for('main.home') }}">ğŸ  Home</a> |
      <a href="{{ url_for('main.python_terminal') }}">Python</a> |
      <a href="{{ url_for('auth.logout') }}">ğŸšª Logout</a>
    {% endif %}
  </div>

  <div class="terminal">
    <h1 class="page-title">Learn R With AI</h1>

    <div class="dual-column-container">
      <!-- Chat Panel -->
      <div class="left-panel">
        <div id="chatBox" class="chat-box"></div>
        <div class="chat-input-wrapper">
          <textarea id="prompt" placeholder="Ask me anything..."></textarea>
          <button id="voiceBtn" class="chat-icon" title="Speak">ğŸ™ï¸</button>
          <button onclick="askGroq()" class="chat-icon" title="Send">â¤</button>
        </div>
        <h5 style="text-align: center;">AI can make mistakes. Check important info.</h5>
      </div>

      <!-- Code Terminal Panel -->
      <div class="right-panel">
        <textarea id="codeID" placeholder="Write R code here..."></textarea>
        <div class="code-buttons">
          <button id="runID">â–¶ï¸ Run</button>
          <button id="resetID">ğŸ”„ Reset</button>
          <button onclick="printTerminal()" class="print">ğŸ–¨ï¸ Print</button>
        </div>
        <pre><code class="output" id="outputID"></code></pre>
      </div>
    </div>

    <div id="loadingMessage" style="color: #ccc; text-align: center; padding: 20px;">
      â³ Loading WebR and essential packages...
    </div>
  </div>

  <script>hljs.highlightAll();</script>

  <!-- Load correct script -->
  <script type="module" src="{{ url_for('static', filename='js/r_terminal.js') }}"></script>
  <script type="module" src="{{ url_for('static', filename='js/utils.js') }}"></script>
</body>
</html>
